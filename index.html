<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Global Market Dashboard</title>
<style>
body {
  background:#0b1220;
  color:#e5e7eb;
  font-family:Arial;
}
.card {
  background:#111827;
  padding:20px;
  border-radius:15px;
  max-width:900px;
  margin:20px auto;
  box-shadow:0 0 20px #000;
}
.row {display:flex; justify-content:space-between; margin:10px 0;}
button,input {
  background:#1f2937; color:white; border:none;
  padding:8px; border-radius:8px;
}
.green {color:#22c55e;}
.red {color:#ef4444;}
iframe {border-radius:12px;}
</style>
</head>
<body>

<div class="card">
<h2>ğŸŒ Global Market Dashboard</h2>

<div id="usd"></div>
<div id="gold"></div>
<div id="silver"></div>
<div id="copper"></div>
<div id="crude"></div>

<h3>ğŸ“ˆ Gold Chart</h3>
<iframe src="https://s.tradingview.com/widgetembed/?symbol=OANDA:XAUUSD&interval=60&theme=dark" width="100%" height="250"></iframe>

<h3>ğŸ“Š USDINR Chart</h3>
<iframe src="https://s.tradingview.com/widgetembed/?symbol=FX_IDC:USDINR&interval=60&theme=dark" width="100%" height="250"></iframe>

<h3>ğŸ”” Gold Price Alert</h3>
<input id="alertPrice" placeholder="Gold price USD/oz">
<button onclick="setAlert()">Set Alert</button>
<p id="alertStatus"></p>

<h3>ğŸ‡®ğŸ‡³ Indian ETFs / Stocks</h3>
<div id="stocks"></div>

<h3>ğŸ“² Telegram Bot Alerts</h3>
<p>Bot API format:</p>
<code>
https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage?chat_id=YOUR_CHAT_ID&text=Hello
</code>

<p>Use this URL in cron job / Windows scheduler at 9am,1pm,5pm</p>
</div>

<script>
let usdInr=0, gold=0;

async function loadData(){
  // USD INR
  let fx = await fetch("https://api.exchangerate.host/latest?base=USD&symbols=INR").then(r=>r.json());
  usdInr = fx.rates.INR;

  // Metals prices
  let metals = await fetch("https://api.metals.live/v1/spot").then(r=>r.json());

  gold = metals.gold;
  let silver = metals.silver;
  let copper = metals.copper;
  let crude = metals.oil;

  document.getElementById("usd").innerHTML = `ğŸ’± USD â†’ INR: <b>${usdInr.toFixed(2)}</b>`;
  document.getElementById("gold").innerHTML = `ğŸ¥‡ Gold: $${gold} /oz`;
  document.getElementById("silver").innerHTML = `ğŸª™ Silver: â‚¹${((silver*usdInr)/31.103).toFixed(2)} per gram`;
  document.getElementById("copper").innerHTML = `ğŸ”© Copper: â‚¹${((copper*usdInr)/31.103).toFixed(2)} per gram`;
  document.getElementById("crude").innerHTML = `ğŸ›¢ï¸ Crude: â‚¹${((crude*usdInr)/159).toFixed(2)} per litre`;

  loadStocks();
}

async function loadStocks(){
  let symbols = ["TATAGOLD.NS","TATSILV.NS","HINDCOPPER.NS"];
  let url = `https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbols.join(",")}`;
  let data = await fetch(url).then(r=>r.json());

  let html="";
  data.quoteResponse.result.forEach(s=>{
    let nav = gold*usdInr/31.103; // approx fair value logic
    let suggestion = s.regularMarketPrice < nav ? "<span class='green'>BUY</span>" : "<span class='red'>SELL</span>";
    html += `<p>${s.symbol}: â‚¹${s.regularMarketPrice} â†’ ${suggestion}</p>`;
  });

  document.getElementById("stocks").innerHTML = html;
}

function setAlert(){
  let target = parseFloat(document.getElementById("alertPrice").value);
  document.getElementById("alertStatus").innerText = "Alert Active";
  setInterval(()=>{
    if(gold >= target){
      alert("Gold crossed "+target);
    }
  },10000);
}

loadData();
setInterval(loadData,60000);
</script>
</body>
</html>
