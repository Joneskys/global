<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Global Market Dashboard</title>
<style>
body { background:#0b1220; color:#e5e7eb; font-family:Arial; }
.card {
  background:#111827; padding:20px; border-radius:16px;
  max-width:950px; margin:20px auto; box-shadow:0 0 25px black;
}
h2,h3 { margin-top:20px; }
.stat { margin:8px 0; font-size:16px; }
.green{color:#22c55e} .red{color:#ef4444}
input,button {
  background:#1f2937;color:white;border:none;padding:8px;border-radius:8px;
}
iframe{border-radius:12px}
</style>
</head>
<body>

<div class="card">
<h2>ğŸŒ Global Market Dashboard</h2>

<div id="usd" class="stat"></div>
<div id="gold" class="stat"></div>
<div id="silver" class="stat"></div>
<div id="copper" class="stat"></div>
<div id="crude" class="stat"></div>

<h3>ğŸ“ˆ Gold Chart</h3>
<iframe src="https://s.tradingview.com/widgetembed/?symbol=OANDA:XAUUSD&interval=60&theme=dark" width="100%" height="250"></iframe>

<h3>ğŸ“Š USDINR Chart</h3>
<iframe src="https://s.tradingview.com/widgetembed/?symbol=FX_IDC:USDINR&interval=60&theme=dark" width="100%" height="250"></iframe>

<h3>ğŸ”” Gold Price Alert</h3>
<input id="alertPrice" placeholder="Enter Gold price USD/oz">
<button onclick="setAlert()">Set Alert</button>
<div id="alertStatus"></div>

<h3>ğŸ‡®ğŸ‡³ Indian ETFs / Stocks</h3>
<div id="stocks"></div>

<h3>ğŸ“² Telegram Bot Alerts</h3>
<p>Telegram API format:</p>
<code>https://api.telegram.org/botBOT_TOKEN/sendMessage?chat_id=CHAT_ID&text=YourMessage</code>
<p>Use cron-job.org or Windows Task Scheduler at 9am, 1pm, 5pm.</p>
</div>

<script>
let usd=0, gold=0;

async function loadData(){
  const fx = await fetch("https://api.exchangerate.host/latest?base=USD&symbols=INR").then(r=>r.json());
  usd = fx.rates.INR;

  const metals = await fetch("https://api.metals.live/v1/spot").then(r=>r.json());

  gold = metals.gold;
  let silver = metals.silver;
  let copper = metals.copper;
  let crude = metals.oil;

  document.getElementById("usd").innerHTML = `ğŸ’± USD â†’ INR: <b>${usd.toFixed(2)}</b>`;
  document.getElementById("gold").innerHTML = `ğŸ¥‡ Gold: $${gold} /oz â†’ â‚¹${((gold*usd)/31.103).toFixed(2)} per gram`;
  document.getElementById("silver").innerHTML = `ğŸª™ Silver: $${silver} /oz â†’ â‚¹${((silver*usd)/31.103).toFixed(2)} per gram`;
  document.getElementById("copper").innerHTML = `ğŸ”© Copper: $${copper} /oz â†’ â‚¹${((copper*usd)/31.103).toFixed(2)} per gram`;
  document.getElementById("crude").innerHTML = `ğŸ›¢ï¸ Crude: $${crude}/barrel â†’ â‚¹${((crude*usd)/159).toFixed(2)} per litre`;

  loadStocks();
}

async function loadStocks(){
  const symbols=["TATAGOLD.NS","TATSILV.NS","HINDCOPPER.NS"];
  const url=`https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbols.join(",")}`;
  const data=await fetch(url).then(r=>r.json());

  let html="";
  data.quoteResponse.result.forEach(s=>{
    let fair = ((gold*usd)/31.103).toFixed(0);
    let suggestion = s.regularMarketPrice < fair ? "<span class='green'>BUY</span>" : "<span class='red'>SELL</span>";
    html+=`${s.symbol.replace(".NS","")} : â‚¹${s.regularMarketPrice} â†’ ${suggestion}<br>`;
  });
  document.getElementById("stocks").innerHTML=html;
}

function setAlert(){
  let target=parseFloat(document.getElementById("alertPrice").value);
  document.getElementById("alertStatus").innerText="Alert running...";
  setInterval(()=>{
    if(gold>=target){ alert("Gold crossed "+target); }
  },15000);
}

loadData();
setInterval(loadData,60000);
</script>
</body>
</html>
