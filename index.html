<!DOCTYPE html>
<html>
<head>
  <title>Global Rates Dashboard</title>
  <style>
    body { font-family: Arial; background:#0f172a; color:white; padding:20px; }
    .card { background:#1e293b; padding:15px; border-radius:12px; margin:10px 0; }
    h1 { color:#38bdf8; }
    span { color:#22c55e; font-weight:bold; }
  </style>
</head>
<body>

<h1>ðŸ“Š Global Rates Dashboard</h1>

<div class="card">ðŸ’µ USD â†’ INR: <span id="usdInr">Loading...</span></div>

<div class="card">
  ðŸª™ Gold (USD / ounce): <span id="goldUsd">Loading...</span><br>
  ðŸ‡®ðŸ‡³ Gold (INR / gram): <span id="goldInr">Loading...</span>
</div>

<div class="card">
  ðŸ¥ˆ Silver (USD / ounce): <span id="silverUsd">Loading...</span><br>
  ðŸ‡®ðŸ‡³ Silver (INR / Kg): <span id="silverInr">Loading...</span>
</div>

<div class="card">
  ðŸŸ« Copper (USD / ounce): <span id="copperUsd">Loading...</span><br>
  ðŸ‡®ðŸ‡³ Copper (INR / Kg): <span id="copperInr">Loading...</span>
</div>

<script>
async function loadData() {
  try {
    // ---------- USD to INR ----------
    const forexRes = await fetch("https://open.er-api.com/v6/latest/USD");
    const forexData = await forexRes.json();
    const usdInr = forexData?.rates?.INR;

    if (!usdInr) throw "Forex failed";

    document.getElementById("usdInr").innerText = usdInr.toFixed(2);

    // ---------- Metals ----------
    const metalsRes = await fetch("https://data-asg.goldprice.org/dbXRates/USD");
    const metalsData = await metalsRes.json();

    const item = metalsData?.items?.[0];
    if (!item) throw "Metals failed";

    const gold = item.xauPrice;
    const silver = item.xagPrice;
    const copper = item.xcuPrice || null; // sometimes missing

    // Show USD prices
    document.getElementById("goldUsd").innerText = "$" + gold.toFixed(2);
    document.getElementById("silverUsd").innerText = "$" + silver.toFixed(2);

    if (copper) {
      document.getElementById("copperUsd").innerText = "$" + copper.toFixed(4);
    } else {
      document.getElementById("copperUsd").innerText = "Not available";
    }

    // ---------- Conversions ----------
    const ounceToGram = 31.1035;
    const ounceToKg = 0.0311035;

    const goldInrGram = (gold / ounceToGram) * usdInr;
    const silverInrKg = (silver / ounceToKg) * usdInr;

    document.getElementById("goldInr").innerText = "â‚¹" + goldInrGram.toFixed(2);
    document.getElementById("silverInr").innerText = "â‚¹" + silverInrKg.toFixed(2);

    if (copper) {
      const copperInrKg = (copper / ounceToKg) * usdInr;
      document.getElementById("copperInr").innerText = "â‚¹" + copperInrKg.toFixed(2);
    } else {
      document.getElementById("copperInr").innerText = "Not available";
    }

    // Remove error message if success
    const err = document.getElementById("err");
    if (err) err.remove();

  } catch (e) {
    console.error(e);

    if (!document.getElementById("err")) {
      const p = document.createElement("p");
      p.id = "err";
      p.style.color = "red";
      p.innerText = "âš  Failed to load some data (API limitation)";
      document.body.appendChild(p);
    }
  }
}

loadData();
setInterval(loadData, 60000);
</script>

</body>
</html>
