<!DOCTYPE html>
<html>
<head>
  <title>Global Rates Dashboard</title>
  <style>
    body { font-family: Arial; background:#0f172a; color:white; padding:20px; }
    .card { background:#1e293b; padding:15px; border-radius:12px; margin:12px 0; }
    h1 { color:#38bdf8; }
    span { color:#22c55e; font-weight:bold; }
    .sell { color:#f87171; font-weight:bold; }
    .buy { color:#4ade80; font-weight:bold; }
  </style>
</head>
<body>

<h1>ðŸ“Š Global Rates Dashboard</h1>

<div class="card">ðŸ’µ USD â†’ INR: <span id="usdInr">Loading...</span></div>

<div class="card">
  ðŸª™ Gold USD/oz: <span id="goldUsd">...</span><br>
  ðŸ‡®ðŸ‡³ Gold INR/g: <span id="goldInr">...</span>
</div>

<div class="card">
  ðŸ¥ˆ Silver USD/oz: <span id="silverUsd">...</span><br>
  ðŸ‡®ðŸ‡³ Silver INR/kg: <span id="silverInr">...</span>
</div>

<div class="card">
  ðŸ›¢ Crude Oil USD/barrel: <span id="oilUsd">...</span><br>
  ðŸ‡®ðŸ‡³ Crude Oil INR/liter: <span id="oilInr">...</span>
</div>

<div class="card">
  ðŸ“ˆ Indian Stocks (Live)<br><br>
  TATAGOLD: <span id="tatagold"></span> (<span id="tatagoldSig"></span>)<br>
  TATSILVER: <span id="tatsilver"></span> (<span id="tatsilverSig"></span>)<br>
  HINDCOPPER: <span id="hindcopper"></span> (<span id="hindcopperSig"></span>)
</div>

<script>
async function loadData() {
  try {
    // USD â†’ INR
    const forex = await fetch("https://open.er-api.com/v6/latest/USD");
    const forexData = await forex.json();
    const usdInr = forexData.rates.INR;
    document.getElementById("usdInr").innerText = usdInr.toFixed(2);

    // Metals
    const metalsRes = await fetch("https://data-asg.goldprice.org/dbXRates/USD");
    const metals = await metalsRes.json();
    const gold = metals.items[0].xauPrice;
    const silver = metals.items[0].xagPrice;

    document.getElementById("goldUsd").innerText = "$" + gold.toFixed(2);
    document.getElementById("silverUsd").innerText = "$" + silver.toFixed(2);

    const goldInrGram = (gold / 31.1035) * usdInr;
    const silverInrKg = (silver / 0.0311035) * usdInr;

    document.getElementById("goldInr").innerText = "â‚¹" + goldInrGram.toFixed(2);
    document.getElementById("silverInr").innerText = "â‚¹" + silverInrKg.toFixed(2);

    // Crude Oil (Yahoo Finance proxy)
    const oilRes = await fetch("https://query1.finance.yahoo.com/v7/finance/quote?symbols=CL=F");
    const oilData = await oilRes.json();
    const oilUsd = oilData.quoteResponse.result[0].regularMarketPrice;
    document.getElementById("oilUsd").innerText = "$" + oilUsd.toFixed(2);

    const oilInrLiter = (oilUsd * usdInr) / 158.987;
    document.getElementById("oilInr").innerText = "â‚¹" + oilInrLiter.toFixed(2);

    // Stocks from Yahoo Finance NSE
    await loadStock("TATAGOLD.NS", "tatagold", "tatagoldSig");
    await loadStock("TATSILVER.NS", "tatsilver", "tatsilverSig");
    await loadStock("HINDCOPPER.NS", "hindcopper", "hindcopperSig");

  } catch (e) {
    console.error(e);
  }
}

async function loadStock(symbol, priceId, sigId) {
  const res = await fetch(`https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbol}`);
  const data = await res.json();
  const stock = data.quoteResponse.result[0];

  const price = stock.regularMarketPrice;
  const prev = stock.regularMarketPreviousClose;

  document.getElementById(priceId).innerText = "â‚¹" + price.toFixed(2);

  if (price > prev) {
    document.getElementById(sigId).innerHTML = "<span class='buy'>BUY</span>";
  } else {
    document.getElementById(sigId).innerHTML = "<span class='sell'>SELL</span>";
  }
}

loadData();
setInterval(loadData, 60000);
</script>

</body>
</html>
